---
import type { HTMLAttributes } from 'astro/types';

import { getLocalizedPath } from '@i18n/utils';

interface Props extends HTMLAttributes<'nav'> {
  currentLocale: string;
  class?: string;
}

const { currentLocale, class: className, ...attrs } = Astro.props;
const currentPath = Astro.url.pathname;
---

<nav class:list={['lang-switcher', className]} aria-label="Language" {...attrs}>
  <a
    href={getLocalizedPath(currentPath, 'lt')}
    class:list={[{ active: currentLocale === 'lt' }]}
    aria-current={currentLocale === 'lt' ? 'page' : undefined}
  >LT</a>
  <a
    href={getLocalizedPath(currentPath, 'en')}
    class:list={[{ active: currentLocale === 'en' }]}
    aria-current={currentLocale === 'en' ? 'page' : undefined}
  >EN</a>
</nav>

<style>
  .lang-switcher {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    transform: rotate(-10deg);
    border-radius: 50%;
    border: 1.5px solid var(--color-offwhite);
    color: var(--color-offwhite);
    font-family: var(--font-body);
    font-size: 11px;
    font-weight: 700;
    line-height: 12px;
    letter-spacing: 1.32px;
    text-decoration: none;
    opacity: 1;
    transition: background 0.2s, color 0.2s;
  }

  a:hover {
    background: var(--color-offwhite);
    color: #000;
  }

  a.active {
    opacity: 1;
    background: var(--color-offwhite);
    color: #000;
    font-weight: 800;
  }
</style>
