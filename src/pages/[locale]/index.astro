---
import type { GetStaticPaths } from 'astro';

import BaseLayout from '@layouts/BaseLayout.astro';
import BodyTextContainer from '@components/BodyTextContainer.astro';
import DeguLogo from '@components/DeguLogo.astro';
import HeaderContainer from '@components/HeaderContainer.astro';
import ImageGallery from '@components/ImageGallery.astro';
import LanguageSwitcher from '@components/LanguageSwitcher.astro';
import MenuCollapsed from '@components/MenuCollapsed.astro';
import MenuExpanded from '@components/MenuExpanded.astro';
import PageDesktop from '@components/PageDesktop.astro';
import PageMobile from '@components/PageMobile.astro';
import PageScrollDesktop from '@components/PageScrollDesktop.astro';
import PageScrollMobile from '@components/PageScrollMobile.astro';
import ScrollHint from '@components/ScrollHint.astro';

import { t } from '@i18n/utils';

import socialMediaHero from '@assets/images/pages/social-media-hero.png';
import productPhotographyHero from '@assets/images/pages/product-photography-hero.png';
import keyVisualsHero from '@assets/images/pages/key-visuals-hero.png';
import socialMediaMobile from '@assets/images/pages/Social media assets - Mobile.png';
import productPhotographyMobile from '@assets/images/pages/Product photography- Mobile.png';
import keyVisualsMobile from '@assets/images/pages/Key Visuals & OOH - Mobile.png';

// Gallery images — social media
import sm01 from '@assets/images/gallery/social-media/social-media-1.png';
import sm02 from '@assets/images/gallery/social-media/social-media-2.png';
import sm03 from '@assets/images/gallery/social-media/social-media-3.png';
import sm04 from '@assets/images/gallery/social-media/social-media-4.png';
import sm05 from '@assets/images/gallery/social-media/social-media-5.png';
import sm06 from '@assets/images/gallery/social-media/social-media-6.png';

// Gallery images — product photography
import pp01 from '@assets/images/gallery/product-photography/product-photography-1.png';
import pp02 from '@assets/images/gallery/product-photography/product-photography-2.png';
import pp03 from '@assets/images/gallery/product-photography/product-photography-3.png';
import pp04 from '@assets/images/gallery/product-photography/product-photography-4.png';
import pp05 from '@assets/images/gallery/product-photography/product-photography-5.png';

// Gallery images — key visuals
import kv01 from '@assets/images/gallery/key-visuals/key-visuals-1.png';
import kv02 from '@assets/images/gallery/key-visuals/key-visuals-2.png';

export const getStaticPaths = (() => {
  return [
    { params: { locale: 'en' } },
  ];
}) satisfies GetStaticPaths;

const { locale } = Astro.params;
const i18n = t(locale);

const socialMediaGalleryImages = [sm01, sm02, sm03, sm04, sm05, sm06].map((src, i) => ({
  src,
  alt: i18n.work.pages.socialMedia.gallery[i],
}));

const productPhotographyGalleryImages = [pp01, pp02, pp03, pp04, pp05].map((src, i) => ({
  src,
  alt: i18n.work.pages.productPhotography.gallery[i],
}));

const keyVisualsGalleryImages = [kv01, kv02].map((src, i) => ({
  src,
  alt: i18n.work.pages.keyVisuals.gallery[i],
}));
---

<BaseLayout title={i18n.meta.title} description={i18n.meta.description} locale={locale}>
  <DeguLogo />
  <LanguageSwitcher currentLocale={locale} />

  <main class="hero">
    <div class="intro-block" data-intro="intro-block">
      <HeaderContainer text={i18n.intro.header1} data-intro="header-degu" />
      <div class="studio-row">
        <HeaderContainer text={i18n.intro.header2} data-intro="header-studio" />
        <BodyTextContainer text={i18n.intro.body} class="intro-body" data-intro="body-text" />
      </div>
    </div>
    <ScrollHint class="scroll-hint-pos" data-intro="scroll-hint" />
    <PageScrollDesktop data-scroll="page-scroll">
      <PageDesktop
        imageSrc={socialMediaHero}
        imageAlt={i18n.work.pages.socialMedia.imageAlt}
        galleryId="social-media"
        loading="eager"
        data-intro="gallery-placeholder"
      />
      <PageDesktop
        imageSrc={productPhotographyHero}
        imageAlt={i18n.work.pages.productPhotography.imageAlt}
        galleryId="product-photography"
      />
      <PageDesktop
        imageSrc={keyVisualsHero}
        imageAlt={i18n.work.pages.keyVisuals.imageAlt}
        galleryId="key-visuals"
      />
    </PageScrollDesktop>
    <PageScrollMobile data-scroll="page-scroll-mobile">
      <PageMobile
        imageSrc={socialMediaHero}
        mobileImageSrc={socialMediaMobile}
        imageAlt={i18n.work.pages.socialMedia.imageAlt}
        galleryId="social-media"
        loading="eager"
        data-intro="gallery-placeholder"
      />
      <PageMobile
        imageSrc={productPhotographyHero}
        mobileImageSrc={productPhotographyMobile}
        imageAlt={i18n.work.pages.productPhotography.imageAlt}
        galleryId="product-photography"
      />
      <PageMobile
        imageSrc={keyVisualsHero}
        mobileImageSrc={keyVisualsMobile}
        imageAlt={i18n.work.pages.keyVisuals.imageAlt}
        galleryId="key-visuals"
      />
    </PageScrollMobile>
  </main>
  <div class="menu-wrapper">
    <MenuCollapsed locale={locale} />
  </div>
  <MenuExpanded activeSection="home" locale={locale} />

  <ImageGallery
    galleryId="social-media"
    images={socialMediaGalleryImages}
    layout={['full', 'pair', 'full', 'pair']}
    closeLabel={i18n.gallery.close}
  />
  <ImageGallery
    galleryId="product-photography"
    images={productPhotographyGalleryImages}
    layout={['full', 'pair', 'pair']}
    closeLabel={i18n.gallery.close}
  />
  <ImageGallery
    galleryId="key-visuals"
    images={keyVisualsGalleryImages}
    layout={['full', 'full']}
    closeLabel={i18n.gallery.close}
  />
</BaseLayout>

<script>
  import { initIntroAnimation } from '@lib/animations/intro';
  import { initGallery } from '@lib/animations/gallery';
  initIntroAnimation();
  initGallery();
</script>

<style>
  .hero {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    overflow: hidden;
    padding: 32.8vh 2rem 2rem;
  }

  .intro-block {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
  }

  .studio-row {
    display: flex;
    align-items: center;
    gap: clamp(4px, 1.5vw, 24px);
  }

  .intro-body {
    text-align: left;
  }

  .scroll-hint-pos {
    position: relative;
    z-index: 2;
    margin-top: 20px;
  }

  .menu-wrapper {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
    opacity: 0;
    pointer-events: none;
  }

  .hero :global(.page-scroll-desktop),
  .hero :global(.page-scroll-mobile) {
    position: absolute;
    inset: 0;
    z-index: 1;
    overflow: hidden;
    visibility: hidden;
  }

  @media (max-width: 768px) {
    .hero :global(.page-scroll-desktop) {
      display: none;
    }
  }

  @media (min-width: 769px) {
    .hero :global(.page-scroll-mobile) {
      display: none;
    }
  }

  [data-intro="intro-block"],
  [data-intro="scroll-hint"] {
    visibility: hidden;
  }

  @media (max-width: 768px) {
    .hero {
      padding: 32.8vh 1rem 2rem;
    }
  }
</style>
